$(document).ready(function(){$("#login_form").submit(function(e){e.preventDefault(),$.ajax({url:"users/login",type:"POST",data:{username:$("#username").val(),password:$("#password").val()},success:function(e){"failed"==e?($("span").remove(".error_msg"),$("#login_form").before('<span class="w3-tag error_msg">Echec lors de la connexion: <br> Nom d\'utilisateur et/ou mot de passe incorrect.</span>')):(alert("Connexion réussie!"),window.location.href="home/index")}})}),$("#register_form").submit(function(e){e.preventDefault(),$.ajax({url:"users/register",type:"POST",data:{username:$("#username").val(),email:$("#email").val(),password:$("#password").val()},success:function(e){"exists"==e?($("span").remove(".error_msg"),$("#register_form").before("<span class=\"w3-tag error_msg\">Echec lors de l'inscription: <br> L'adresse email ou le nom d'utilisateur existe déjà.</span>")):"succeed"==e?(alert("Inscription réussie!"),window.location.href="home/index"):$("#register_form").before("<span class=\"w3-tag error_msg\">Echec lors de l'inscription: <br> Une erreur inconnue s'est produite.</span>")}})}),$("#add_post_form").submit(function(e){e.preventDefault(),"<p>&nbsp;</p>"==$("#editor").val()?alert("Veuillez ajouter un contenu à votre article."):($("#add_post").addClass("w3-disabled"),$.ajax({url:"posts/add_post",type:"POST",data:new FormData(this),contentType:!1,cache:!1,processData:!1,success:function(e){"failed"==e?alert("Cet article existe déjà."):(alert("Nouvel article ajouté avec succès!"),window.location.href="dashboard/posts")}}))}),$("#edit_post_form").submit(function(e){e.preventDefault();var a=$(this).attr("action"),t=a.split("/");"<p>&nbsp;</p>"==$("#editor").val()?alert("Veuillez ajouter un contenu à votre article."):($("#edit_post").addClass("w3-disabled"),$.ajax({url:a,type:"POST",data:new FormData(this),contentType:!1,cache:!1,processData:!1,success:function(e){alert("L'article a été modifié avec succès!"),window.location.href="dashboard/posts/"+t[3]}}))}),$("#delete_post").click(function(e){e.preventDefault(),window.confirm("Etes-vous sûr de vouloir supprimer cet article?")&&(window.location.href=$(this).attr("href"))}),$("#delete_user").click(function(e){e.preventDefault(),window.confirm("Etes-vous sûr de vouloir supprimer cet utilisateur?")&&(window.location.href=$(this).attr("href"))}),$("#delete_comment").click(function(e){e.preventDefault(),window.confirm("Etes-vous sûr de vouloir supprimer ce commentaire?")&&(window.location.href=$(this).attr("href"))}),$("#delete_tag").click(function(e){e.preventDefault(),window.confirm("Etes-vous sûr de vouloir supprimer ce tag?")&&(window.location.href=$(this).attr("href"))}),$("#blog_button").click(function(e){e.preventDefault(),$("#blog").show(),$("#admin").hide(),$("#database").hide()}),$("#admin_button").click(function(e){e.preventDefault(),$("#blog").hide(),$("#admin").show(),$("#database").hide()}),$("#database_button").click(function(e){e.preventDefault(),$("#blog").hide(),$("#admin").hide(),$("#database").show()}),$("#settings_form").submit(function(e){e.preventDefault(),$("#admin_password").val()!=$("#admin_password_true").val()?alert("Les mots de passe ne correspondent pas."):($("#save_button").addClass("w3-disabled"),$.ajax({url:"install/update",type:"POST",data:{admin_username:$("#admin_username").val(),admin_password:$("#admin_password").val(),admin_email:$("#admin_email").val(),web_title:$("#web_title").val(),web_root:$("#web_root").val(),web_description:$("#web_description").val()},success:function(e){alert("La configuration a été sauvegardée avec succès!"),window.location.href="dashboard/settings"},error:function(e){alert("Echec lors de la sauvegarde de la configuration."),$("#save_button").removeClass("w3-disabled")}}))}),$("#install_form").submit(function(e){e.preventDefault(),$("#admin_password").val()!=$("#admin_password_true").val()?alert("Les mots de passe ne correspondent pas!"):($("#install_button").addClass("w3-disabled"),$.ajax({url:"install/install",type:"POST",data:{admin_username:$("#admin_username").val(),admin_password:$("#admin_password").val(),admin_email:$("#admin_email").val(),web_title:$("#web_title").val(),web_root:$("#web_root").val(),web_description:$("#web_description").val(),db_host:$("#db_host").val(),db_username:$("#db_username").val(),db_password:$("#db_password").val(),db_name:$("#db_name").val()},success:function(e){alert("L'installation s'est éffectuée correctement!"),window.location.href="users/index"},error:function(e){alert("Echec lors de l'installation."),$("#install_button").removeClass("w3-disabled")}}))}),$("#read_more").click(function(e){e.preventDefault();var a=$(this).attr("href").split("/");$.ajax({url:"posts/update_views",type:"POST",data:{slug:a[3]},success:function(e){}}),window.location.href=$(this).attr("href")})});